<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Food Recommendation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <style>
      body{
        background-image: url(/static/food_recommendation/food7.png);  
        
      }
      form{
        background-color: white;
        padding: 2%;
        border-radius: 1%;
      }
      
      .nav-link:hover {
            background-color: rgb(30, 114, 240);
            box-shadow: 1px 5px 7px 1px rgba(0,0,0,0.2);
      }
      
      h1,h2,p{
        padding: 2%;
        border-radius: 1%;
        background-color: white;
      }
    </style>

  </head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Sip N Savour</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                <div class="navbar-nav">
                    <a class="nav-link" href="{% url 'homepage' %}">Home</a>
                    <a class="nav-link" href="{% url 'recommend_drink' %}">Recommend me a Drink</a> 
                    <a class="nav-link" href="{% url 'view_recommendations' %}">View Past Drinks Recommendations</a>
                    <a class="nav-link" href="{% url 'view_past_food' %}">View Past Food Recommendations</a>
                    <a class="nav-link" href="{% url 'account' %}">My Account</a>
                    <a class="nav-link" href="{% url 'login' %}">Log Out</a>
                </div>
            </div>
        </div>
    </nav>
    <div class="container mt-5">
        <h1>Lets recommend you something to eat...</h1>
        {% if error_message %}
    <div class="alert alert-danger" role="alert">
        {{ error_message }}
    </div>
    {% endif %}

        <form method="post" class="mt-4">
            {% csrf_token %}
            <div class="mb-3">
                <label for="course" class="form-label">Select Course:</label>
                <select name="course" id="course" class="form-select" required>
                    <option disabled selected>Select course type</option>
                    <option value="Mains">Mains</option>
                    <option value="Starter">Starter</option>
                    <option value="Dessert">Dessert</option>
                </select>
            </div>

            <div class="mb-3">
                <label for="cuisine" class="form-label">Select Cuisine:</label>
                <select name="cuisine" id="cuisine" class="form-select" required>
                    <option disabled selected>Select a cuisine</option>
                    <option value="Italian">Italian</option>
                    <option value="Chinese">Chinese</option>
                    <option value="Indian">Indian</option>
                    <option value="French">French</option>
                    <option value="Albanian">Albanian</option>
                </select>
            </div>

            <div class="mb-3" style= "display: flex; flex-wrap: wrap;" >
                <label for="allergies" class="form-label">Select the allergies you are allergic to (select multiple if needed):</label>
                <div class="form-check" style="margin-right: 10px;">
                    <input type="checkbox" name="allergies" value="Celery" class="form-check-input">
                    <label class="form-check-label">Celery</label>
                </div>
                <div class="form-check" style="margin-right: 10px;">
                  <input type="checkbox" name="allergies" value="Cereal containing gluten" class="form-check-input">
                  <label class="form-check-label" for="allergy_gluten">Cereal containing gluten</label>
                </div>
                <div class="form-check" style="margin-right: 10px;">
                  <input type="checkbox" name="allergies" value="Crustaceans" class="form-check-input" >
                  <label class="form-check-label">Crustaceans</label>
                </div>
                <div class="form-check" style="margin-right: 10px;">
                  <input type="checkbox" name="allergies" value="Eggs" class="form-check-input" >
                  <label class="form-check-label">Eggs</label>
                </div>
                <div class="form-check" style="margin-right: 10px;">
                  <input type="checkbox" name="allergies" value="Fish" class="form-check-input" >
                  <label class="form-check-label">Fish</label>
                </div>
                <div class="form-check"style="margin-right: 10px;">
                  <input type="checkbox" name="allergies" value="Lupin" class="form-check-input" >
                  <label class="form-check-label">Lupin</label>
                </div>
                <div class="form-check" style="margin-right: 10px;">
                  <input type="checkbox" name="allergies" value="Milk" class="form-check-input" >
                  <label class="form-check-label">Milk</label>
                </div>
                <div class="form-check" style="margin-right: 10px;">
                  <input type="checkbox" name="allergies" value="Molluscs" class="form-check-input" >
                  <label class="form-check-label">Molluscs</label>
                </div>
                <div class="form-check" style="margin-right: 10px;">
                  <input type="checkbox" name="allergies" value="Mustard" class="form-check-input" >
                  <label class="form-check-label">Mustard</label>
                </div>
                <div class="form-check" style="margin-right: 10px;">
                  <input type="checkbox" name="allergies" value="Nuts" class="form-check-input" >
                  <label class="form-check-label">Nuts</label>
                </div>
                <div class="form-check" style="margin-right: 10px;">
                  <input type="checkbox" name="allergies" value="Peanuts" class="form-check-input" >
                  <label class="form-check-label">Peanuts</label>
                </div>
                <div class="form-check" style="margin-right: 10px;">
                  <input type="checkbox" name="allergies" value="Sesame seeds" class="form-check-input" >
                  <label class="form-check-label">Sesame seeds</label>
                </div>
                <div class="form-check" style="margin-right: 10px;">
                  <input type="checkbox" name="allergies" value="Sulphites" class="form-check-input" >
                  <label class="form-check-label">Sulphites</label>
                </div>
                <div class="form-check" style="margin-right: 10px;">
                  <input type="checkbox" name="allergies" value="No allergies" class="form-check-input" >
                  <label class="form-check-label">No Allergies</label>
                </div>
            </div>

            <div id="vegetarian_option" class="mb-3">
                <label for="vegetarian" class="form-label" >Do you want a vegetarian option?</label><br>
                <div class="form-check form-check-inline">
                    <input type="radio" name="vegetarian" value="Yes" id="vegetarian_yes" class="form-check-input">
                    <label class="form-check-label">Yes</label>
                </div>
                <div class="form-check form-check-inline">
                    <input type="radio" name="vegetarian" value="No" id="vegetarian_no" class="form-check-input">
                    <label class="form-check-label">No</label>
                </div>
            </div>

            <div id="meat_dropdown" class="mb-3" style="display: none;">
                <label for="meat" class="form-label">Choose the type of meat:</label>
                <select name="meat" id="meat" class="form-select" required>
                    <option disabled selected>Select the meat type</option>
                    <option value="Chicken">Chicken</option>
                    <option value="Beef">Beef</option>
                    <option value="Duck">Duck</option>
                    <option value="Fish">Fish</option>
                    <option value="Pork">Pork</option>
                    <option value="Snail">Snail</option>
                    <option value="Rabbit">Rabbit</option>
                    <option value="Veal">Veal</option>
                </select>
            </div>

            <button type="submit" class="btn btn-primary">Recommend</button>
        </form>

        <h2 class="mt-5">Our Choice: {{ recommendations }}</h2>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function() {
          var courseDropdown = document.getElementById("course");
          var vegetarianOption = document.getElementById("vegetarian_option");
          var meatDropdown = document.getElementById("meat_dropdown");
  
          // Show or hide the vegetarian and meat dropdowns based on the selected course. 
          function toggleDropdowns() {
              if (courseDropdown.value === "Dessert") { //if dessert, vegetarian and meat are hidden
                  vegetarianOption.style.display = "none";
                  meatDropdown.style.display = "none";
              } else {
                  vegetarianOption.style.display = "block";
                  toggleMeatDropdown();
              }
          }
  
          // Show or hide the meat dropdown based on the value of the vegetarian radio button
          function toggleMeatDropdown() {
              var vegetarianYes = document.getElementById("vegetarian_yes");//if vegetarian is yes, meat is hidden
              if (!vegetarianYes.checked && courseDropdown.value !== "Dessert") {
                  meatDropdown.style.display = "block";
              } else {
                  meatDropdown.style.display = "none";
              }
          }
  
          // Add event listeners to the course dropdown and vegetarian radio buttons
          courseDropdown.addEventListener("change", toggleDropdowns);
          var vegetarianRadios = document.querySelectorAll("input[name='vegetarian']");
          vegetarianRadios.forEach(function(radio) {
              radio.addEventListener("change", toggleMeatDropdown);
          });
  
          // Initialize the visibility of dropdowns
          toggleDropdowns();
      });
  </script>
  </body>
</html>
